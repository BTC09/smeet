<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMEET Casino - Plinko</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; font-family: Arial, sans-serif; }
    canvas { display: block; }
    
    #welcome {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      font-size: 80px; color: #FFD700; text-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700, 0 0 30px #FF4500;
      white-space: nowrap; overflow: hidden; clip-path: inset(0 100% 0 0);
      animation: revealText 2s forwards ease-out; z-index: 10;
    }
    
    @keyframes revealText { 
      from { clip-path: inset(0 100% 0 0); } 
      to { clip-path: inset(0 0 0 0); } 
    }
    
    .fade-out { animation: fadeOut 1s forwards; }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    
    #menu {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      color: #fff; text-align: center; display: none; z-index: 10;
    }
    
    #menu button {
      font-size: 25px; margin: 15px; padding: 10px 30px; background: #222; color: #FFD700;
      border: 2px solid #FFD700; cursor: pointer; border-radius: 10px; transition: 0.3s;
    }
    
    #menu button:hover { background: #FFD700; color: #000; }
    
    #ui {
      position: absolute; top: 10px; left: 10px; color: #fff; z-index: 10; font-size: 20px;
      background: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; display: none;
    }
    
    #ui label { margin-right: 10px; }
    #ui input { width: 80px; padding: 5px; font-size: 16px; }
    #ui button {
      font-size: 18px; padding: 8px 20px; margin-left: 10px; background: #FFD700; 
      color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;
    }
    #ui button:hover { background: #FFA500; }
  </style>
</head>
<body>

<div id="welcome">üé∞ SMEET üé∞</div>
<div id="menu">
  <h2>–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å</h2>
  <button onclick="startPlinko('easy')">–õ–µ–≥–∫–∏–π</button>
  <button onclick="startPlinko('medium')">–°—Ä–µ–¥–Ω–∏–π</button>
  <button onclick="startPlinko('hard')">–¢—è–∂–µ–ª—ã–π</button>
</div>

<div id="ui">
  <label>üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span></label>
  <label>üíµ –°—Ç–∞–≤–∫–∞: <input type="number" id="bet" value="50" min="10" max="1000"></label>
  <button onclick="dropBall()">üéØ –ó–∞–ø—É—Å—Ç–∏—Ç—å —à–∞—Ä–∏–∫</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
(function() {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–Ω–≤–∞—Å–∞
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  let balance = 1000;
  let level = 'easy';
  let sections = [];
  let pins = [];
  let balls = [];
  const ballRadius = 10;
  let gameActive = false;

  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è —É—Ä–æ–≤–Ω–µ–π
  const levels = {
    easy: [0.8, 1, 1.2, 1.5, 2, 2.5, 3, 4, 5],
    medium: [0.5, 0.8, 1, 1.3, 1.8, 2.2, 3, 5, 8, 10],
    hard: [0.2, 0.5, 0.8, 1.2, 1.8, 2.5, 4, 6, 10, 15, 25, 50, 100]
  };

  // –ó–≤–µ–∑–¥—ã –∏ –∫–æ–º–µ—Ç—ã
  const stars = [];
  const comets = [];

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤–µ–∑–¥
  for (let i = 0; i < 150; i++) {
    stars.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      radius: Math.random() * 2 + 0.5,
      alpha: Math.random(),
      alphaChange: (Math.random() * 0.01 + 0.002) * (Math.random() > 0.5 ? 1 : -1)
    });
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–µ—Ç
  for (let i = 0; i < 3; i++) {
    comets.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height * 0.3,
      speedX: Math.random() * 3 + 2,
      speedY: Math.random() * 2 + 1,
      radius: Math.random() * 3 + 2,
      trail: []
    });
  }

  // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
  const welcomeDiv = document.getElementById('welcome');
  const menuDiv = document.getElementById('menu');
  const uiDiv = document.getElementById('ui');

  setTimeout(() => {
    welcomeDiv.classList.add('fade-out');
    setTimeout(() => {
      welcomeDiv.style.display = 'none';
      menuDiv.style.display = 'block';
    }, 1000);
  }, 3000);

  // –§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ä—Ç–∞ –∏–≥—Ä—ã
  window.startPlinko = function(selectedLevel) {
    level = selectedLevel;
    gameActive = true;
    menuDiv.style.display = 'none';
    initPlinko();
    uiDiv.style.display = 'block';
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—è –ü–ª–∏–Ω–∫–æ
  function initPlinko() {
    sections = [];
    pins = [];
    balls = [];
    
    const prizeList = levels[level];
    const sectionWidth = canvas.width / prizeList.length;
    
    // –°–æ–∑–¥–∞–µ–º —Å–µ–∫—Ü–∏–∏
    for (let i = 0; i < prizeList.length; i++) {
      sections.push({
        x: i * sectionWidth,
        width: sectionWidth,
        coef: prizeList[i],
        color: `hsl(${(i * 30) % 360}, 80%, 60%)`
      });
    }

    // –°–æ–∑–¥–∞–µ–º —à—Ç—ã—Ä–∏ (–ø–∏—Ä–∞–º–∏–¥–∞)
    const rows = 8;
    const startY = 150;
    const spacing = 65;
    
    for (let row = 0; row < rows; row++) {
      const cols = prizeList.length + (row % 2 === 0 ? 0 : 1);
      const offset = (canvas.width - (cols - 1) * spacing) / 2;
      
      for (let col = 0; col < cols; col++) {
        const x = offset + col * spacing;
        const y = startY + row * spacing * 0.9;
        pins.push({ x, y, radius: 5 });
      }
    }
  }

  // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —à–∞—Ä–∏–∫–∞
  window.dropBall = function() {
    if (!gameActive) return;
    
    const betInput = document.getElementById('bet');
    const bet = parseInt(betInput.value);
    
    if (isNaN(bet) || bet < 10) {
      alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ 10');
      return;
    }
    
    if (bet > balance) {
      alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!');
      return;
    }
    
    balance -= bet;
    document.getElementById('balance').innerText = balance;
    
    // –î–æ–±–∞–≤–ª—è–µ–º —à–∞—Ä–∏–∫ —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º —Å–º–µ—â–µ–Ω–∏–µ–º
    balls.push({
      x: canvas.width / 2 + (Math.random() - 0.5) * 30,
      y: 80,
      vx: (Math.random() - 0.5) * 4,
      vy: 0.5,
      bet: bet,
      radius: ballRadius
    });
  };

  // –ê–Ω–∏–º–∞—Ü–∏—è –∏ —Ñ–∏–∑–∏–∫–∞
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // –†–∏—Å—É–µ–º –∑–≤–µ–∑–¥—ã
    stars.forEach(star => {
      ctx.beginPath();
      ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
      ctx.fill();
      
      star.alpha += star.alphaChange * 0.01;
      if (star.alpha > 1 || star.alpha < 0.1) {
        star.alphaChange *= -1;
      }
    });
    
    // –†–∏—Å—É–µ–º –∫–æ–º–µ—Ç—ã
    comets.forEach(comet => {
      // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –≤ —Å–ª–µ–¥
      comet.trail.push({ x: comet.x, y: comet.y });
      if (comet.trail.length > 15) {
        comet.trail.shift();
      }
      
      // –†–∏—Å—É–µ–º —Å–ª–µ–¥
      comet.trail.forEach((point, index) => {
        const alpha = index / comet.trail.length * 0.5;
        ctx.beginPath();
        ctx.arc(point.x, point.y, comet.radius * 0.8, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
        ctx.fill();
      });
      
      // –†–∏—Å—É–µ–º –∫–æ–º–µ—Ç—É
      ctx.beginPath();
      ctx.arc(comet.x, comet.y, comet.radius, 0, Math.PI * 2);
      ctx.fillStyle = 'white';
      ctx.fill();
      
      // –î–≤–∏–∂–µ–Ω–∏–µ
      comet.x += comet.speedX;
      comet.y += comet.speedY;
      
      // –†–µ—Å–ø–∞—É–Ω
      if (comet.x > canvas.width + 50 || comet.y > canvas.height + 50) {
        comet.x = Math.random() * canvas.width * 0.3;
        comet.y = Math.random() * canvas.height * 0.2;
        comet.trail = [];
      }
    });
    
    // –†–∏—Å—É–µ–º —Å–µ–∫—Ü–∏–∏ (–≤–Ω–∏–∑—É)
    if (sections.length > 0) {
      sections.forEach(section => {
        ctx.fillStyle = section.color;
        ctx.fillRect(section.x, canvas.height - 50, section.width, 50);
        
        ctx.fillStyle = 'white';
        ctx.font = 'bold 16px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('x' + section.coef, section.x + section.width / 2, canvas.height - 15);
      });
    }
    
    // –†–∏—Å—É–µ–º —à—Ç—ã—Ä–∏
    pins.forEach(pin => {
      ctx.beginPath();
      ctx.arc(pin.x, pin.y, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#FFD700';
      ctx.fill();
      ctx.strokeStyle = '#B8860B';
      ctx.lineWidth = 1;
      ctx.stroke();
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏ —Ä–∏—Å—É–µ–º —à–∞—Ä–∏–∫–∏
    if (balls.length > 0) {
      for (let i = balls.length - 1; i >= 0; i--) {
        const ball = balls[i];
        
        // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
        ball.vy += 0.2;
        
        // –¢—Ä–µ–Ω–∏–µ
        ball.vx *= 0.99;
        
        // –î–≤–∏–∂–µ–Ω–∏–µ
        ball.x += ball.vx;
        ball.y += ball.vy;
        
        // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ —à—Ç—ã—Ä—è–º–∏
        pins.forEach(pin => {
          const dx = ball.x - pin.x;
          const dy = ball.y - pin.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          if (distance < ball.radius + 5) {
            // –û—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ
            const angle = Math.atan2(dy, dx);
            const force = (ball.radius + 5 - distance) * 0.5;
            
            ball.x += Math.cos(angle) * force;
            ball.y += Math.sin(angle) * force;
            
            // –û—Ç—Å–∫–æ–∫
            const speed = Math.sqrt(ball.vx * ball.vx + ball.vy * ball.vy);
            if (speed > 0.1) {
              const nx = dx / distance;
              const ny = dy / distance;
              const dot = ball.vx * nx + ball.vy * ny;
              
              ball.vx = (ball.vx - 2 * dot * nx) * 0.7;
              ball.vy = (ball.vy - 2 * dot * ny) * 0.7;
            }
          }
        });
        
        // –ì—Ä–∞–Ω–∏—Ü—ã –ø–æ –±–æ–∫–∞–º
        if (ball.x < ball.radius) {
          ball.x = ball.radius;
          ball.vx *= -0.7;
        }
        if (ball.x > canvas.width - ball.radius) {
          ball.x = canvas.width - ball.radius;
          ball.vx *= -0.7;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –¥–Ω–∞
        if (ball.y + ball.radius > canvas.height - 50) {
          // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–µ–∫—Ü–∏—é
          const sectionIndex = Math.floor(ball.x / (canvas.width / sections.length));
          if (sectionIndex >= 0 && sectionIndex < sections.length) {
            const winAmount = Math.floor(ball.bet * sections[sectionIndex].coef);
            balance += winAmount;
            document.getElementById('balance').innerText = balance;
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)
          }
          
          // –£–¥–∞–ª—è–µ–º —à–∞—Ä–∏–∫
          balls.splice(i, 1);
        } else {
          // –†–∏—Å—É–µ–º —à–∞—Ä–∏–∫
          ctx.beginPath();
          ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
          
          // –ì—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã
          const gradient = ctx.createRadialGradient(ball.x - 3, ball.y - 3, 2, ball.x, ball.y, ball.radius);
          gradient.addColorStop(0, '#FF5555');
          gradient.addColorStop(1, '#AA0000');
          
          ctx.fillStyle = gradient;
          ctx.fill();
          
          // –ë–ª–∏–∫
          ctx.beginPath();
          ctx.arc(ball.x - 3, ball.y - 3, 3, 0, Math.PI * 2);
          ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
          ctx.fill();
        }
      }
    }
    
    requestAnimationFrame(animate);
  }

  // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
  animate();

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Å–∞–π–∑–∞ –æ–∫–Ω–∞
  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    if (gameActive) {
      initPlinko();
    }
  });
})();
</script>
</body>
</html>
