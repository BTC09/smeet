<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMEET Casino - Plinko</title>
<style>
body {margin:0; overflow:hidden; background:#000; font-family:Arial;}
canvas{display:block;}

#welcome {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:100px; color:#FFD700;
    text-shadow:0 0 10px #FFD700,0 0 20px #FFD700,0 0 30px #FF4500;
    white-space:nowrap; overflow:hidden; clip-path:inset(0 100% 0 0);
    animation:revealText 2s forwards ease-out; z-index:10;
}

@keyframes revealText { from{clip-path:inset(0 100% 0 0);} to{clip-path:inset(0 0 0 0);} }

.fade-out {animation:fadeOut 1s forwards;}
@keyframes fadeOut{from{opacity:1;}to{opacity:0;}}

#menu {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
    color:#fff;text-align:center; display:none; z-index:10;
}
#menu button {font-size:30px;margin:20px;padding:15px 40px;background:#222;color:#FFD700;border:2px solid #FFD700;cursor:pointer;border-radius:10px;transition:0.3s;}
#menu button:hover {background:#FFD700;color:#000;}
</style>
</head>
<body>

<div id="welcome">ðŸŽ° SMEET ðŸŽ°</div>
<div id="menu">
<h2>Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸Ð³Ñ€Ñƒ</h2>
<button onclick="startPlinko()">ÐŸÐ»Ð¸Ð½ÐºÐ¾</button>
<button onclick="alert('Ð¡Ð»Ð¾Ñ‚Ñ‹ Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹!')">Ð¡Ð»Ð¾Ñ‚Ñ‹</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// ---------- Ð¤Ð¾Ð½ ----------
const stars=[], comets=[];
for(let i=0;i<200;i++) stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,radius:Math.random()*1.5+0.5,alpha:Math.random(),alphaChange:Math.random()*0.01+0.002});
for(let i=0;i<5;i++) comets.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height/2,speedX:Math.random()*2+1,speedY:Math.random()*2+1,radius:Math.random()*3+2,trail:[]});

// ---------- ÐŸÐ»Ð¸Ð½ÐºÐ¾ ----------
let plinkoActive=false;
const cols=10, pinRadius=6, pinSpacingX=80, pinSpacingY=80, ballRadius=12;
let sections=[], pins=[], balls=[];

function initPlinko(){
    sections=[]; pins=[]; balls=[];
    for(let i=0;i<cols;i++) sections.push({x:i*(canvas.width/cols), width:canvas.width/cols, prize: Math.floor(Math.random()*100)+50});
    for(let row=0; row<7; row++){
        for(let col=0; col<cols; col++){
            const offset=row%2===0?0:pinSpacingX/2;
            const x=col*pinSpacingX+offset+(canvas.width-cols*pinSpacingX)/2;
            const y=row*pinSpacingY+150;
            pins.push({x,y});
        }
    }
}

function dropBall(){
    balls.push({x:canvas.width/2, y:50, vx:(Math.random()*2-1)*3, vy:0});
}

// ---------- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ ----------
function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // --- Ð—Ð²ÐµÐ·Ð´Ñ‹ ---
    stars.forEach(s=>{
        ctx.beginPath(); ctx.arc(s.x,s.y,s.radius,0,Math.PI*2); ctx.fillStyle=`rgba(255,255,255,${s.alpha})`; ctx.fill(); ctx.closePath();
        s.alpha+=s.alphaChange; if(s.alpha>1||s.alpha<0)s.alphaChange*=-1;
    });

    // --- ÐšÐ¾Ð¼ÐµÑ‚Ñ‹ ---
    comets.forEach(c=>{
        c.trail.push({x:c.x,y:c.y});
        if(c.trail.length>20) c.trail.shift();
        c.trail.forEach((p,i)=>{
            const alpha=i/c.trail.length*0.5;
            ctx.beginPath(); ctx.arc(p.x,p.y,c.radius,0,Math.PI*2); ctx.fillStyle=`rgba(255,255,255,${alpha})`; ctx.fill(); ctx.closePath();
        });
        ctx.beginPath(); ctx.arc(c.x,c.y,c.radius,0,Math.PI*2); ctx.fillStyle='#fff'; ctx.fill(); ctx.closePath();
        c.x+=c.speedX; c.y+=c.speedY;
        if(c.x>canvas.width+50||c.y>canvas.height+50){c.x=Math.random()*canvas.width;c.y=-50;c.trail=[];}
    });

    // --- ÐŸÐ»Ð¸Ð½ÐºÐ¾ ---
    if(plinkoActive){
        // Ð¡ÐµÐºÑ†Ð¸Ð¸
        sections.forEach(s=>{
            ctx.fillStyle='rgba(255,255,255,0.1)';
            ctx.fillRect(s.x,canvas.height-50,s.width,50);
            ctx.fillStyle='#fff';
            ctx.font='20px Arial';
            ctx.fillText(s.prize, s.x+s.width/2-10, canvas.height-20);
        });

        // Ð‘Ð¾Ñ€Ñ‚Ð¸ÐºÐ¸
        ctx.fillStyle='#FFD700';
        ctx.fillRect(0,0,10,canvas.height);
        ctx.fillRect(canvas.width-10,0,10,canvas.height);

        // Ð¨Ñ‚Ñ‹Ñ€Ð¸
        pins.forEach(pin=>{ctx.beginPath();ctx.arc(pin.x,pin.y,pinRadius,0,Math.PI*2);ctx.fillStyle='#FFD700';ctx.fill();ctx.closePath();});

        // Ð¨Ð°Ñ€Ð¸ÐºÐ¸
        balls.forEach(ball=>{
            ball.vy+=0.35;
            ball.vx*=0.995;
            ball.x+=ball.vx; ball.y+=ball.vy;

            // ÐžÑ‚ÑÐºÐ¾Ðº Ð¾Ñ‚ ÑˆÑ‚Ñ‹Ñ€ÐµÐ¹
            pins.forEach(pin=>{
                const dx=pin.x-ball.x, dy=pin.y-ball.y, dist=Math.sqrt(dx*dx+dy*dy);
                if(dist<pinRadius+ballRadius){
                    const angle=Math.atan2(dy,dx);
                    const targetDist=pinRadius+ballRadius;
                    const ax=Math.cos(angle)*(targetDist-dist);
                    const ay=Math.sin(angle)*(targetDist-dist);
                    ball.x-=ax; ball.y-=ay;
                    const bounce=0.7;
                    ball.vx=-ball.vx*bounce; ball.vy=-ball.vy*bounce;
                }
            });

            // Ð‘Ð¾Ñ€Ñ‚Ð¸ÐºÐ¸
            if(ball.x-ballRadius<10){ball.x=10+ballRadius; ball.vx*=-0.7;}
            if(ball.x+ballRadius>canvas.width-10){ball.x=canvas.width-10-ballRadius; ball.vx*=-0.7;}
            if(ball.y+ballRadius>canvas.height-50){
                const sec=Math.floor(ball.x/(canvas.width/cols));
                ctx.beginPath(); ctx.arc(ball.x,canvas.height-55,ballRadius*2,0,Math.PI*2); ctx.fillStyle='rgba(255,255,0,0.7)'; ctx.fill(); ctx.closePath();
                console.log('Ð’Ñ‹ Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ð»Ð¸:',sections[sec].prize);
                ball.y=canvas.height+100; ball.vx=0; ball.vy=0;
            }

            // Ð Ð¸ÑÑƒÐµÐ¼ ÑˆÐ°Ñ€Ð¸Ðº
            ctx.beginPath(); ctx.arc(ball.x,ball.y,ballRadius,0,Math.PI*2); ctx.fillStyle='#ff5555'; ctx.fill(); ctx.closePath();
        });
    }

    requestAnimationFrame(animate);
}

animate();

// ---------- ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ðº Ð¼ÐµÐ½ÑŽ ----------
const welcomeDiv=document.getElementById('welcome');
const menuDiv=document.getElementById('menu');
setTimeout(()=>{
    welcomeDiv.classList.add('fade-out');
    setTimeout(()=>{welcomeDiv.style.display='none'; menuDiv.style.display='block';},1000);
},3000);

// ---------- ÐŸÐ»Ð¸Ð½ÐºÐ¾ ----------
function startPlinko(){ plinkoActive=true; menuDiv.style.display='none'; initPlinko(); }
canvas.addEventListener('click',()=>{ if(plinkoActive) dropBall(); });

// ---------- Resize ----------
window.addEventListener('resize',()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;});
</script>
</body>
</html>
