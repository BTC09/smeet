<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMEET CASINO | Plinko Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background: #0a0c0f;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', system-ui, sans-serif;
            overflow: hidden;
        }

        /* –ù–ê–ß–ê–õ–¨–ù–´–ô –≠–ö–†–ê–ù */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1a1f2e 0%, #0a0c15 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }

        .welcome-content {
            text-align: center;
            animation: glowPulse 2s infinite;
        }

        .welcome-title {
            font-size: 120px;
            font-weight: 900;
            color: #ffd966;
            text-shadow: 0 0 30px #f0b429, 0 0 60px #ff8800, 0 0 90px #ff5500;
            letter-spacing: 8px;
            margin-bottom: 20px;
            animation: slideInDown 1.2s ease;
        }

        .welcome-subtitle {
            font-size: 32px;
            color: #b9c7da;
            text-shadow: 0 0 15px #4f9fff;
            animation: slideInUp 1.2s ease 0.2s both;
        }

        .loading-dots {
            margin-top: 50px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .loading-dots span {
            width: 20px;
            height: 20px;
            background: #ffd966;
            border-radius: 50%;
            animation: bounce 1.4s infinite;
            box-shadow: 0 0 20px #f0b429;
        }

        .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
        .loading-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes glowPulse {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
            100% { filter: brightness(1); }
        }

        @keyframes slideInDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
            40% { transform: scale(1.2); opacity: 1; }
        }

        .game-container {
            background: #1a1e24;
            border-radius: 32px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
            border: 1px solid #2f3742;
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .game-container.visible {
            opacity: 1;
            transform: scale(1);
        }

        canvas {
            display: block;
            width: 900px;
            height: 700px;
            border-radius: 24px;
            background: #0f1217;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.8);
        }

        .ui-panel {
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #13171d;
            padding: 20px 25px;
            border-radius: 28px;
            border: 1px solid #2a333f;
        }

        .balance-box {
            background: #0b0e12;
            padding: 12px 30px;
            border-radius: 40px;
            border: 1px solid #3e4a5a;
            box-shadow: inset 0 2px 5px #00000055;
        }

        .balance-label {
            color: #9aa9bb;
            font-size: 14px;
            letter-spacing: 1px;
        }

        .balance-value {
            color: #ffd966;
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 0 10px #ffb34755;
        }

        .bet-control {
            display: flex;
            align-items: center;
            gap: 20px;
            background: #0f141b;
            padding: 8px 20px;
            border-radius: 60px;
            border: 1px solid #354153;
        }

        .bet-control label {
            color: #b9c7da;
            font-weight: 500;
        }

        .bet-input {
            background: #1e293b;
            border: 1px solid #4b6180;
            color: #ffd966;
            font-size: 24px;
            font-weight: 700;
            width: 110px;
            padding: 10px 15px;
            border-radius: 40px;
            text-align: center;
            outline: none;
        }

        .bet-input:focus {
            border-color: #f0b429;
            box-shadow: 0 0 12px #f0b42955;
        }

        .drop-btn {
            background: linear-gradient(145deg, #f0b429, #d4941f);
            border: none;
            color: #1a1f2b;
            font-size: 26px;
            font-weight: 800;
            padding: 14px 45px;
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 8px 0 #8f6016, 0 8px 20px #f0b42999;
            transition: 0.08s linear;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .drop-btn:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #8f6016, 0 8px 20px #f0b42999;
        }

        .level-selector {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            justify-content: center;
        }

        .level-btn {
            background: #222a35;
            border: 1px solid #44566b;
            color: #9fb0cc;
            font-size: 18px;
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 40px;
            cursor: pointer;
            transition: 0.2s;
        }

        .level-btn.active {
            background: #f0b429;
            border-color: #fae56c;
            color: #141a24;
            box-shadow: 0 0 15px #f0b429;
            font-weight: 700;
        }

        /* –ü–∞–¥–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ */
        .star {
            position: fixed;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px white;
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>
<body>
    <!-- –ù–ê–ß–ê–õ–¨–ù–´–ô –≠–ö–†–ê–ù -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <div class="welcome-title">SMEET</div>
            <div class="welcome-subtitle">CASINO ‚Ä¢ PLINKO</div>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <!-- –ò–ì–†–û–í–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <div class="game-container" id="gameContainer">
        <canvas id="plinkoCanvas" width="900" height="700"></canvas>

        <div class="ui-panel">
            <div class="balance-box">
                <div class="balance-label">–ë–ê–õ–ê–ù–°</div>
                <div class="balance-value" id="balanceDisplay">1000</div>
            </div>

            <div class="bet-control">
                <label>–°–¢–ê–í–ö–ê</label>
                <input type="number" id="betInput" class="bet-input" value="50" min="10" step="10">
            </div>

            <button class="drop-btn" id="dropBallBtn">üé≤ –ë–†–û–°–ò–¢–¨</button>
        </div>

        <div class="level-selector">
            <button class="level-btn active" data-level="easy">üå± –õ–Å–ì–ö–ò–ô</button>
            <button class="level-btn" data-level="medium">‚ö° –°–†–ï–î–ù–ò–ô</button>
            <button class="level-btn" data-level="hard">üî• –•–ê–†–î</button>
        </div>
    </div>

    <script>
        (function() {
            // ------ –°–û–ó–î–ê–ï–ú –ü–ê–î–ê–Æ–©–ò–ï –ó–í–ï–ó–î–´ –î–õ–Ø –ù–ê–ß–ê–õ–¨–ù–û–ì–û –≠–ö–†–ê–ù–ê ------
            function createStars() {
                for (let i = 0; i < 30; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = '-10px';
                    star.style.width = star.style.height = (Math.random() * 4 + 2) + 'px';
                    star.style.animation = `fallStar ${Math.random() * 3 + 2}s linear`;
                    star.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(star);
                    
                    // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                    setTimeout(() => {
                        star.remove();
                    }, 5000);
                }
            }

            // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–≤–µ–∑–¥—ã –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
            setInterval(createStars, 2000);
            createStars(); // —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤—É—é –ø–∞—Ä—Ç–∏—é

            // ------ –ê–ù–ò–ú–ê–¶–ò–Ø –ü–ê–î–ï–ù–ò–Ø –ó–í–ï–ó–î ------
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fallStar {
                    0% {
                        transform: translateY(0) rotate(0deg);
                        opacity: 1;
                    }
                    100% {
                        transform: translateY(100vh) rotate(360deg);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);

            // ------ –ü–ï–†–ï–•–û–î –û–¢ –ù–ê–ß–ê–õ–¨–ù–û–ì–û –≠–ö–†–ê–ù–ê –ö –ò–ì–†–ï ------
            const welcomeScreen = document.getElementById('welcomeScreen');
            const gameContainer = document.getElementById('gameContainer');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω 3 —Å–µ–∫—É–Ω–¥—ã, –∑–∞—Ç–µ–º –ø–ª–∞–≤–Ω–æ —É–±–∏—Ä–∞–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä—É
            setTimeout(() => {
                welcomeScreen.style.opacity = '0';
                setTimeout(() => {
                    welcomeScreen.style.display = 'none';
                    gameContainer.classList.add('visible');
                }, 1000);
            }, 3000);

            // ------ –ù–ê–°–¢–†–û–ô–ö–ò –ü–û–õ–Ø ------
            const canvas = document.getElementById('plinkoCanvas');
            const ctx = canvas.getContext('2d');
            const width = 900, height = 700;
            canvas.width = width; canvas.height = height;

            // ------ –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ì–†–´ ------
            let balance = 1000;
            let currentLevel = 'easy';
            let balls = [];
            let pins = [];
            let multipliers = [];
            let gameActive = true;
            
            // –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π
            const levelMultipliers = {
                easy:   [1.2, 1.5, 2.0, 3.0, 5.0, 3.0, 2.0, 1.5, 1.2],
                medium: [0.7, 1.0, 1.5, 3.0, 10.0, 3.0, 1.5, 1.0, 0.7],
                hard:   [0.3, 0.7, 1.2, 2.5, 20.0, 50.0, 20.0, 2.5, 1.2, 0.7, 0.3]
            };

            // ------ –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–ò–†–ê–ú–ò–î–´ ------
            function generatePlinkoField(level) {
                pins = [];
                const mults = levelMultipliers[level] || levelMultipliers.easy;
                const rows = 12;
                const startY = 100;
                const pinRadius = 5;
                const spacingX = 52;
                const spacingY = 38;

                const maxCols = mults.length + 2;
                const totalWidth = (maxCols - 1) * spacingX;
                const offsetX = (width - totalWidth) / 2;

                for (let row = 0; row < rows; row++) {
                    let cols;
                    if (row < 5) cols = 5 + row;
                    else if (row < 8) cols = 9;
                    else cols = 17 - row;
                    
                    cols = Math.min(cols, mults.length + 3);
                    
                    const rowOffsetX = (maxCols - cols) * spacingX / 2;
                    
                    for (let col = 0; col < cols; col++) {
                        const x = offsetX + rowOffsetX + col * spacingX + (row % 2 === 0 ? spacingX/2 : 0);
                        const y = startY + row * spacingY;
                        
                        pins.push({
                            x: x + (Math.random() * 2 - 1),
                            y: y + (Math.random() * 1.5 - 0.75),
                            r: pinRadius
                        });
                    }
                }

                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —è—á–µ–µ–∫ —Å –º–Ω–æ–∂–∏—Ç–µ–ª—è–º–∏
                multipliers = [];
                const cellWidth = width / mults.length;
                for (let i = 0; i < mults.length; i++) {
                    let color;
                    const val = mults[i];
                    if (val < 1) color = '#6c7a96';
                    else if (val < 2) color = '#4f9fff';
                    else if (val < 4) color = '#42d692';
                    else if (val < 8) color = '#ffb347';
                    else color = '#ff6b6b';
                    
                    multipliers.push({
                        x: i * cellWidth,
                        w: cellWidth,
                        value: val,
                        color: color
                    });
                }
            }

            // ------ –ù–ê–ß–ê–õ–¨–ù–ê–Ø –ì–ï–ù–ï–†–ê–¶–ò–Ø ------
            generatePlinkoField(currentLevel);

            // ------ –ö–õ–ê–°–° –®–ê–†–ò–ö–ê ------
            class Ball {
                constructor(x, y, bet) {
                    this.x = x;
                    this.y = y;
                    this.vx = (Math.random() - 0.5) * 1.5;
                    this.vy = 1.0;
                    this.radius = 9;
                    this.bet = bet;
                    this.active = true;
                    this.trail = [];
                }

                update() {
                    this.vy += 0.25;
                    this.vx *= 0.995;
                    
                    this.x += this.vx;
                    this.y += this.vy;
                    
                    this.trail.push({x: this.x, y: this.y});
                    if (this.trail.length > 8) this.trail.shift();

                    for (let pin of pins) {
                        const dx = this.x - pin.x;
                        const dy = this.y - pin.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        const minDist = this.radius + pin.r;
                        
                        if (dist < minDist) {
                            const angle = Math.atan2(dy, dx);
                            const overlap = minDist - dist;
                            
                            this.x += Math.cos(angle) * overlap * 0.8;
                            this.y += Math.sin(angle) * overlap * 0.8;
                            
                            const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                            if (speed > 0.1) {
                                const nx = dx / dist;
                                const ny = dy / dist;
                                const dot = this.vx * nx + this.vy * ny;
                                
                                this.vx = (this.vx - 1.6 * dot * nx) * 0.75;
                                this.vy = (this.vy - 1.6 * dot * ny) * 0.75;
                            }
                        }
                    }

                    if (this.x - this.radius < 15) {
                        this.x = 15 + this.radius;
                        this.vx *= -0.7;
                    }
                    if (this.x + this.radius > width - 15) {
                        this.x = width - 15 - this.radius;
                        this.vx *= -0.7;
                    }

                    if (this.y - this.radius < 20) {
                        this.y = 20 + this.radius;
                        this.vy *= -0.5;
                    }

                    if (this.y + this.radius > height - 55) {
                        const cellIndex = Math.floor(this.x / (width / multipliers.length));
                        if (cellIndex >= 0 && cellIndex < multipliers.length) {
                            const mult = multipliers[cellIndex].value;
                            const win = Math.floor(this.bet * mult);
                            balance += win;
                            document.getElementById('balanceDisplay').innerText = balance;
                            flashCell(cellIndex, mult);
                        }
                        return false;
                    }
                    return true;
                }
            }

            // ------ –≠–§–§–ï–ö–¢ –ü–û–î–°–í–ï–¢–ö–ò ------
            let flashData = { active: false, index: -1, alpha: 0, mult: 1 };
            function flashCell(index, mult) {
                flashData.active = true;
                flashData.index = index;
                flashData.alpha = 1.0;
                flashData.mult = mult;
            }

            // ------ –û–¢–†–ò–°–û–í–ö–ê ------
            function draw() {
                ctx.clearRect(0, 0, width, height);

                const bgGrad = ctx.createLinearGradient(0, 0, 0, height);
                bgGrad.addColorStop(0, '#0f1922');
                bgGrad.addColorStop(1, '#1b2938');
                ctx.fillStyle = bgGrad;
                ctx.fillRect(0, 0, width, height);

                // –†–∏—Å—É–µ–º —à—Ç—ã—Ä–∏
                for (let pin of pins) {
                    ctx.beginPath();
                    ctx.arc(pin.x, pin.y, pin.r, 0, Math.PI*2);
                    
                    const grad = ctx.createRadialGradient(pin.x-2, pin.y-2, 2, pin.x, pin.y, pin.r+2);
                    grad.addColorStop(0, '#d4af37');
                    grad.addColorStop(0.7, '#996633');
                    grad.addColorStop(1, '#664422');
                    
                    ctx.fillStyle = grad;
                    ctx.shadowColor = '#ffd966';
                    ctx.shadowBlur = 8;
                    ctx.fill();
                    ctx.shadowBlur = 0;
                    
                    ctx.beginPath();
                    ctx.arc(pin.x-1.5, pin.y-1.5, 1.5, 0, Math.PI*2);
                    ctx.fillStyle = 'rgba(255,255,240,0.5)';
                    ctx.fill();
                }

                // –†–∏—Å—É–µ–º —è—á–µ–π–∫–∏
                for (let i = 0; i < multipliers.length; i++) {
                    const m = multipliers[i];
                    const x = m.x;
                    
                    ctx.fillStyle = m.color + '33';
                    ctx.fillRect(x, height-60, m.w-1, 45);
                    
                    if (flashData.active && flashData.index === i) {
                        ctx.fillStyle = `rgba(255, 255, 255, ${flashData.alpha})`;
                        ctx.fillRect(x, height-60, m.w-1, 45);
                        flashData.alpha *= 0.7;
                        if (flashData.alpha < 0.05) flashData.active = false;
                    }
                    
                    ctx.strokeStyle = '#5f7a9a';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(x, height-60, m.w-1, 45);
                    
                    ctx.font = 'bold 20px "Segoe UI", "Arial"';
                    ctx.fillStyle = '#ffffff';
                    ctx.shadowColor = '#000';
                    ctx.shadowBlur = 5;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText('x' + m.value.toFixed(1), x + m.w/2, height-37);
                    ctx.shadowBlur = 0;
                }

                // –†–∏—Å—É–µ–º —à–∞—Ä–∏–∫–∏
                for (let ball of balls) {
                    for (let i = 0; i < ball.trail.length; i++) {
                        const t = ball.trail[i];
                        const alpha = (i / ball.trail.length) * 0.4;
                        ctx.beginPath();
                        ctx.arc(t.x, t.y, ball.radius * 0.6, 0, Math.PI*2);
                        
                        const gradient = ctx.createRadialGradient(t.x-3, t.y-3, 2, t.x, t.y, ball.radius);
                        gradient.addColorStop(0, `rgba(255, 100, 100, ${alpha})`);
                        gradient.addColorStop(1, `rgba(180, 30, 30, ${alpha*0.5})`);
                        
                        ctx.fillStyle = gradient;
                        ctx.fill();
                    }
                    
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
                    
                    const gradBall = ctx.createRadialGradient(ball.x-4, ball.y-4, 3, ball.x, ball.y, ball.radius+2);
                    gradBall.addColorStop(0, '#ffcccc');
                    gradBall.addColorStop(0.4, '#e63946');
                    gradBall.addColorStop(1, '#a11d2b');
                    
                    ctx.fillStyle = gradBall;
                    ctx.shadowColor = '#ff8888';
                    ctx.shadowBlur = 20;
                    ctx.fill();
                    
                    ctx.shadowBlur = 0;
                    ctx.beginPath();
                    ctx.arc(ball.x-3, ball.y-3, 3, 0, Math.PI*2);
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                    ctx.fill();
                }
            }

            // ------ –ê–ù–ò–ú–ê–¶–ò–Ø ------
            function gameLoop() {
                if (!gameActive) return;
                
                for (let i = balls.length - 1; i >= 0; i--) {
                    const ball = balls[i];
                    const keep = ball.update();
                    if (!keep) {
                        balls.splice(i, 1);
                    }
                }
                
                draw();
                requestAnimationFrame(gameLoop);
            }

            // ------ –ó–ê–ü–£–°–ö –®–ê–†–ò–ö–ê ------
            function dropBall() {
                const betInput = document.getElementById('betInput');
                let bet = parseInt(betInput.value);
                
                if (isNaN(bet) || bet < 10) bet = 10;
                if (bet > balance) {
                    alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞!');
                    return;
                }
                
                balance -= bet;
                document.getElementById('balanceDisplay').innerText = balance;
                
                const startX = width / 2 + (Math.random() * 20 - 10);
                const startY = 45;
                
                const ball = new Ball(startX, startY, bet);
                balls.push(ball);
            }

            // ------ –°–ú–ï–ù–ê –£–†–û–í–ù–Ø ------
            function setLevel(level) {
                currentLevel = level;
                generatePlinkoField(level);
                
                document.querySelectorAll('.level-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.level === level) btn.classList.add('active');
                });
            }

            // ------ –°–û–ë–´–¢–ò–Ø ------
            window.addEventListener('load', () => {
                gameLoop();
                
                document.getElementById('dropBallBtn').addEventListener('click', dropBall);
                
                document.querySelectorAll('.level-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const level = e.target.dataset.level;
                        setLevel(level);
                    });
                });
                
                document.getElementById('betInput').addEventListener('change', function() {
                    let val = parseInt(this.value);
                    if (val < 10) this.value = 10;
                    if (val > 10000) this.value = 10000;
                });
            });

            document.getElementById('balanceDisplay').innerText = balance;
        })();
    </script>
</body>
</html>
