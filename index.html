<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>SMEET CASINO</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: #0b0e14;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 10px;
    }

    /* –ü–†–ò–í–ï–¢–°–¢–í–ï–ù–ù–´–ô –≠–ö–†–ê–ù */
    .welcome-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, #1a1f2e, #0a0c15);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 1s ease;
    }

    .welcome-content {
      text-align: center;
      padding: 20px;
    }

    .welcome-title {
      font-size: clamp(60px, 15vw, 120px);
      font-weight: 900;
      color: #ffd966;
      text-shadow: 0 0 30px #f0b429, 0 0 60px #ff8800;
      letter-spacing: 4px;
      margin-bottom: 20px;
      animation: slideInDown 1.2s ease;
      line-height: 1;
    }

    .welcome-subtitle {
      font-size: clamp(20px, 5vw, 32px);
      color: #b9c7da;
      text-shadow: 0 0 15px #4f9fff;
      animation: slideInUp 1.2s ease 0.2s both;
    }

    .loading-dots {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .loading-dots span {
      width: clamp(15px, 4vw, 20px);
      height: clamp(15px, 4vw, 20px);
      background: #ffd966;
      border-radius: 50%;
      animation: bounce 1.4s infinite;
      box-shadow: 0 0 20px #f0b429;
    }

    .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
    .loading-dots span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes slideInDown {
      from { transform: translateY(-100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes slideInUp {
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
      40% { transform: scale(1.2); opacity: 1; }
    }

    /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† */
    .app {
      width: 100%;
      max-width: 1000px;
      background: #141a24;
      border-radius: clamp(24px, 5vw, 48px);
      padding: clamp(16px, 3vw, 24px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
      border: 1px solid #2d3848;
      opacity: 0;
      transform: scale(0.95);
      transition: opacity 0.8s ease, transform 0.8s ease;
      position: relative;
    }

    .app.visible {
      opacity: 1;
      transform: scale(1);
    }

    /* –°–¢–†–ï–õ–ö–ê –ù–ê–ó–ê–î */
    .back-button {
      position: absolute;
      top: clamp(15px, 3vw, 30px);
      left: clamp(15px, 3vw, 30px);
      width: clamp(50px, 8vw, 60px);
      height: clamp(50px, 8vw, 60px);
      background: #1e2a3a;
      border: 2px solid #ffd966;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(30px, 6vw, 40px);
      color: #ffd966;
      cursor: pointer;
      z-index: 100;
      transition: 0.2s;
      box-shadow: 0 4px 0 #0f1a2a;
    }

    .back-button:active {
      transform: translateY(4px);
      box-shadow: 0 1px 0 #0f1a2a;
    }

    /* –®–ê–ü–ö–ê –° –ë–ê–õ–ê–ù–°–û–ú */
    .header {
      background: #0f151f;
      border-radius: 100px;
      padding: clamp(12px, 2vw, 15px) clamp(20px, 3vw, 30px);
      margin-bottom: clamp(16px, 3vw, 24px);
      margin-left: clamp(60px, 10vw, 70px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border: 1px solid #334153;
      box-shadow: inset 0 2px 5px #00000055;
      flex-wrap: wrap;
      gap: 10px;
    }

    .balance-block {
      display: flex;
      align-items: center;
      gap: clamp(10px, 2vw, 20px);
      background: #1a2332;
      padding: clamp(6px, 1.5vw, 8px) clamp(20px, 4vw, 30px) clamp(6px, 1.5vw, 8px) clamp(15px, 3vw, 20px);
      border-radius: 60px;
      border: 1px solid #4d607c;
    }

    .stars-icon {
      font-size: clamp(24px, 5vw, 32px);
      filter: drop-shadow(0 0 8px gold);
    }

    .balance-value {
      font-size: clamp(24px, 5vw, 36px);
      font-weight: 800;
      color: #ffd966;
      text-shadow: 0 0 10px #f0b429;
    }

    .add-stars-btn {
      background: linear-gradient(145deg, #2a3a55, #1b263b);
      border: 2px solid #ffd966;
      color: #ffd966;
      font-size: clamp(16px, 3vw, 20px);
      font-weight: 700;
      padding: clamp(8px, 2vw, 12px) clamp(20px, 4vw, 30px);
      border-radius: 60px;
      cursor: pointer;
      transition: 0.2s;
      box-shadow: 0 4px 0 #0f1a2a;
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .add-stars-btn:active {
      transform: translateY(4px);
      box-shadow: 0 1px 0 #0f1a2a;
    }

    /* –ú–ï–ù–Æ –ò–ì–† */
    .games-menu {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 21, 31, 0.98);
      z-index: 2000;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: clamp(15px, 3vw, 30px);
      backdrop-filter: blur(10px);
      padding: 20px;
    }

    .games-menu.active {
      display: flex;
    }

    .game-menu-item {
      background: #1e2a3a;
      border: 3px solid #ffd966;
      border-radius: 60px;
      padding: clamp(15px, 3vw, 25px) clamp(40px, 8vw, 80px);
      font-size: clamp(28px, 6vw, 48px);
      font-weight: 800;
      color: #ffd966;
      cursor: pointer;
      transition: 0.3s;
      text-transform: uppercase;
      letter-spacing: 2px;
      width: min(500px, 90%);
      text-align: center;
    }

    .game-menu-item:active {
      background: #ffd966;
      color: #1a2538;
      transform: scale(1.05);
    }

    .game-menu-item.disabled {
      opacity: 0.4;
      cursor: not-allowed;
      border-color: #6c7a96;
      color: #6c7a96;
    }

    .game-menu-item.disabled:active {
      background: #1e2a3a;
      color: #6c7a96;
      transform: none;
    }

    .menu-close-btn {
      position: absolute;
      top: clamp(20px, 5vw, 40px);
      right: clamp(20px, 5vw, 40px);
      font-size: clamp(40px, 8vw, 60px);
      color: #ffd966;
      cursor: pointer;
      width: clamp(60px, 10vw, 80px);
      height: clamp(60px, 10vw, 80px);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #ffd966;
      border-radius: 50%;
    }

    /* CANVAS */
    .canvas-wrapper {
      width: 100%;
      aspect-ratio: 952/700;
      margin-bottom: 20px;
      border-radius: clamp(24px, 4vw, 36px);
      overflow: hidden;
      background: #0f1a24;
      box-shadow: inset 0 0 30px #00000099;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
      background: #0f1a24;
    }

    /* –ö–û–ù–¢–†–û–õ–´ PLINKO */
    .plinko-controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #1b2432;
      padding: clamp(15px, 2.5vw, 20px) clamp(20px, 3vw, 30px);
      border-radius: 60px;
      border: 1px solid #3a4a60;
      flex-wrap: wrap;
      gap: 15px;
    }

    .bet-section {
      display: flex;
      align-items: center;
      gap: clamp(10px, 2vw, 25px);
      background: #121b28;
      padding: clamp(6px, 1.5vw, 8px) clamp(15px, 3vw, 25px);
      border-radius: 50px;
      flex: 1;
      min-width: 250px;
    }

    .bet-label {
      color: #a5bbdd;
      font-size: clamp(16px, 2.5vw, 20px);
      font-weight: 500;
      white-space: nowrap;
    }

    .bet-input {
      background: #1f3147;
      border: 2px solid #ffd966;
      color: #ffd966;
      font-size: clamp(22px, 3.5vw, 28px);
      font-weight: 700;
      width: min(130px, 25vw);
      padding: clamp(8px, 1.5vw, 12px) clamp(12px, 2vw, 20px);
      border-radius: 50px;
      text-align: center;
      outline: none;
    }

    .drop-ball-btn {
      background: linear-gradient(145deg, #f0b429, #d4941f);
      border: none;
      font-size: clamp(22px, 4vw, 32px);
      font-weight: 800;
      padding: clamp(12px, 2vw, 16px) clamp(30px, 5vw, 60px);
      border-radius: 60px;
      color: #141e2c;
      cursor: pointer;
      box-shadow: 0 6px 0 #8f6016, 0 8px 25px #f0b429;
      transition: 0.08s linear;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .drop-ball-btn:active {
      transform: translateY(6px);
      box-shadow: 0 2px 0 #8f6016, 0 8px 25px #f0b429;
    }

    .level-panel {
      display: flex;
      gap: clamp(8px, 1.5vw, 12px);
      margin-top: 16px;
      flex-wrap: wrap;
    }

    .level-btn {
      background: #253141;
      border: 2px solid #4d637f;
      color: #adc4f0;
      font-size: clamp(14px, 2.5vw, 18px);
      font-weight: 700;
      padding: clamp(8px, 1.5vw, 12px) clamp(15px, 3vw, 30px);
      border-radius: 40px;
      cursor: pointer;
      transition: 0.2s;
      flex: 1;
      min-width: 100px;
      text-align: center;
    }

    .level-btn.active {
      background: #ffd966;
      border-color: #fff1b0;
      color: #1a2538;
      box-shadow: 0 0 15px #ffd966;
    }

    /* –ü–∞–¥–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã */
    .star {
      position: fixed;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 10px white;
      pointer-events: none;
      z-index: 999;
    }

    @keyframes fallStar {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
  </style>
</head>
<body>
  <!-- –ü–†–ò–í–ï–¢–°–¢–í–ï–ù–ù–´–ô –≠–ö–†–ê–ù -->
  <div class="welcome-screen" id="welcomeScreen">
    <div class="welcome-content">
      <div class="welcome-title">SMEET</div>
      <div class="welcome-subtitle">CASINO</div>
      <div class="loading-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
  <div class="app" id="app">
    <!-- –°–¢–†–ï–õ–ö–ê –ù–ê–ó–ê–î -->
    <div class="back-button" id="backButton">‚Üê</div>

    <!-- –®–ê–ü–ö–ê -->
    <div class="header">
      <div class="balance-block">
        <span class="stars-icon">‚≠ê</span>
        <span class="balance-value" id="balanceDisplay">1000</span>
      </div>
      <button class="add-stars-btn" id="addStarsBtn">
        <span>‚ûï</span> 1000 ‚≠ê
      </button>
    </div>

    <!-- PLINKO -->
    <div id="plinkoContainer">
      <div class="canvas-wrapper">
        <canvas id="plinkoCanvas" width="952" height="700"></canvas>
      </div>

      <div class="plinko-controls">
        <div class="bet-section">
          <span class="bet-label">–°–¢–ê–í–ö–ê ‚≠ê</span>
          <input type="number" id="betInput" class="bet-input" value="50" min="10" step="10">
        </div>
        <button class="drop-ball-btn" id="dropBallBtn">üé≤ –ö–ò–ù–£–¢–¨</button>
      </div>

      <div class="level-panel">
        <button class="level-btn active" data-level="easy">üå± –õ–Å–ì–ö–ò–ô</button>
        <button class="level-btn" data-level="medium">‚ö° –°–†–ï–î–ù–ò–ô</button>
        <button class="level-btn" data-level="hard">üî• –•–ê–†–î</button>
      </div>
    </div>
  </div>

  <!-- –ú–ï–ù–Æ –ò–ì–† -->
  <div class="games-menu" id="gamesMenu">
    <div class="menu-close-btn" id="menuCloseBtn">‚úï</div>
    <div class="game-menu-item active" data-game="plinko">üé≤ PLINKO</div>
    <div class="game-menu-item disabled" data-game="dice">üé≤ DICE</div>
    <div class="game-menu-item disabled" data-game="slots">üé∞ SLOTS</div>
    <div class="game-menu-item disabled" data-game="roulette">üé° ROULETTE</div>
  </div>

  <script>
    (function() {
      // –ü–∞–¥–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã
      function createStar() {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = '-10px';
        star.style.width = star.style.height = (Math.random() * 4 + 2) + 'px';
        star.style.animation = `fallStar ${Math.random() * 3 + 2}s linear`;
        star.style.animationDelay = Math.random() * 2 + 's';
        document.body.appendChild(star);
        setTimeout(() => star.remove(), 5000);
      }

      setInterval(createStar, 2000);
      for (let i = 0; i < 10; i++) setTimeout(createStar, i * 200);

      // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
      const welcomeScreen = document.getElementById('welcomeScreen');
      const app = document.getElementById('app');

      setTimeout(() => {
        welcomeScreen.style.opacity = '0';
        setTimeout(() => {
          welcomeScreen.style.display = 'none';
          app.classList.add('visible');
        }, 1000);
      }, 3000);

      // –ë–∞–ª–∞–Ω—Å
      let balance = 1000;
      const balanceEl = document.getElementById('balanceDisplay');

      function updateBalance() {
        balanceEl.innerText = balance;
      }

      document.getElementById('addStarsBtn').addEventListener('click', () => {
        balance += 1000;
        updateBalance();
      });

      // –ú–µ–Ω—é –∏–≥—Ä
      const backButton = document.getElementById('backButton');
      const gamesMenu = document.getElementById('gamesMenu');
      const menuCloseBtn = document.getElementById('menuCloseBtn');

      backButton.addEventListener('click', () => {
        gamesMenu.classList.add('active');
      });

      menuCloseBtn.addEventListener('click', () => {
        gamesMenu.classList.remove('active');
      });

      // –í—ã–±–æ—Ä –∏–≥—Ä—ã
      document.querySelectorAll('.game-menu-item').forEach(item => {
        item.addEventListener('click', () => {
          if (item.classList.contains('disabled')) return;
          gamesMenu.classList.remove('active');
          document.querySelectorAll('.game-menu-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');
        });
      });

      // PLINKO
      const canvas = document.getElementById('plinkoCanvas');
      const ctx = canvas.getContext('2d');
      const width = 952, height = 700;

      let currentLevel = 'easy';
      let balls = [];
      let pins = [];
      let multipliers = [];

      // –ü–†–ê–í–ò–õ–¨–ù–´–ï –ö–û–≠–§–§–ò–¶–ò–ï–ù–¢–´: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É, —Ä–∞—Å—Ç—É—Ç –∫ –∫—Ä–∞—è–º
      const levelMultipliers = {
        easy:   [5.0, 3.0, 2.0, 1.5, 1.2, 1.5, 2.0, 3.0, 5.0],
        medium: [10.0, 5.0, 3.0, 1.5, 1.0, 1.5, 3.0, 5.0, 10.0],
        hard:   [50.0, 20.0, 10.0, 5.0, 2.0, 1.2, 2.0, 5.0, 10.0, 20.0, 50.0]
      };

      function generateField(level) {
        pins = [];
        const mults = levelMultipliers[level];
        const rows = 12;
        const startY = 100;
        const pinR = 5;
        const spacingX = 52;
        const spacingY = 38;

        const maxCols = mults.length + 2;
        const totalW = (maxCols - 1) * spacingX;
        const offsetX = (width - totalW) / 2;

        for (let row = 0; row < rows; row++) {
          let cols;
          if (row < 5) cols = 5 + row;
          else if (row < 8) cols = 9;
          else cols = 17 - row;
          cols = Math.min(cols, mults.length + 3);
          
          const rowOffset = (maxCols - cols) * spacingX / 2;
          
          for (let col = 0; col < cols; col++) {
            const x = offsetX + rowOffset + col * spacingX + (row % 2 ? spacingX/2 : 0);
            const y = startY + row * spacingY;
            pins.push({ x, y, r: pinR });
          }
        }

        multipliers = [];
        const cellW = width / mults.length;
        for (let i = 0; i < mults.length; i++) {
          let color;
          const v = mults[i];
          if (v <= 1.2) color = '#6c7a96';
          else if (v <= 2) color = '#4f9fff';
          else if (v <= 5) color = '#42d692';
          else if (v <= 10) color = '#ffb347';
          else color = '#ff6b6b';
          
          multipliers.push({ x: i * cellW, w: cellW, value: v, color });
        }
      }

      generateField(currentLevel);

      class Ball {
        constructor(x, y, bet) {
          this.x = x;
          this.y = y;
          this.vx = (Math.random() - 0.5) * 1.5;
          this.vy = 1;
          this.r = 9;
          this.bet = bet;
          this.trail = [];
        }

        update() {
          this.vy += 0.25;
          this.vx *= 0.995;
          this.x += this.vx;
          this.y += this.vy;
          
          this.trail.push({x: this.x, y: this.y});
          if (this.trail.length > 8) this.trail.shift();

          for (let p of pins) {
            const dx = this.x - p.x;
            const dy = this.y - p.y;
            const dist = Math.sqrt(dx*dx + dy*dy);
            const minDist = this.r + p.r;
            
            if (dist < minDist) {
              const angle = Math.atan2(dy, dx);
              const overlap = minDist - dist;
              this.x += Math.cos(angle) * overlap * 0.8;
              this.y += Math.sin(angle) * overlap * 0.8;
              
              const speed = Math.sqrt(this.vx*this.vx + this.vy*this.vy);
              if (speed > 0.1) {
                const nx = dx/dist;
                const ny = dy/dist;
                const dot = this.vx * nx + this.vy * ny;
                this.vx = (this.vx - 1.6 * dot * nx) * 0.75;
                this.vy = (this.vy - 1.6 * dot * ny) * 0.75;
              }
            }
          }

          if (this.x - this.r < 15) {
            this.x = 15 + this.r;
            this.vx *= -0.7;
          }
          if (this.x + this.r > width - 15) {
            this.x = width - 15 - this.r;
            this.vx *= -0.7;
          }

          if (this.y + this.r > height - 55) {
            const idx = Math.floor(this.x / (width / multipliers.length));
            if (idx >= 0 && idx < multipliers.length) {
              const win = Math.floor(this.bet * multipliers[idx].value);
              balance += win;
              updateBalance();
              flashCell(idx);
            }
            return false;
          }
          return true;
        }
      }

      let flash = { active: false, index: -1, alpha: 0 };
      function flashCell(idx) {
        flash.active = true;
        flash.index = idx;
        flash.alpha = 1;
      }

      function draw() {
        ctx.clearRect(0, 0, width, height);
        
        const grad = ctx.createLinearGradient(0, 0, 0, height);
        grad.addColorStop(0, '#10212e');
        grad.addColorStop(1, '#1d3142');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, width, height);

        pins.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fillStyle = '#d4af37';
          ctx.shadowColor = '#ffd966';
          ctx.shadowBlur = 8;
          ctx.fill();
        });
        ctx.shadowBlur = 0;

        multipliers.forEach((m, i) => {
          ctx.fillStyle = m.color + '33';
          ctx.fillRect(m.x, height-60, m.w-1, 45);
          
          if (flash.active && flash.index === i) {
            ctx.fillStyle = `rgba(255,255,255,${flash.alpha})`;
            ctx.fillRect(m.x, height-60, m.w-1, 45);
            flash.alpha *= 0.6;
            if (flash.alpha < 0.05) flash.active = false;
          }
          
          ctx.strokeStyle = '#5a779c';
          ctx.lineWidth = 2;
          ctx.strokeRect(m.x, height-60, m.w-1, 45);
          
          ctx.font = 'bold 22px "Segoe UI"';
          ctx.fillStyle = 'white';
          ctx.shadowColor = '#000';
          ctx.shadowBlur = 8;
          ctx.textAlign = 'center';
          ctx.fillText('x' + m.value.toFixed(1), m.x + m.w/2, height-32);
        });
        ctx.shadowBlur = 0;

        balls.forEach(b => {
          b.trail.forEach((t, i) => {
            const alpha = (i / b.trail.length) * 0.3;
            ctx.beginPath();
            ctx.arc(t.x, t.y, b.r*0.7, 0, Math.PI*2);
            ctx.fillStyle = `rgba(255,80,80,${alpha})`;
            ctx.fill();
          });
          
          ctx.beginPath();
          ctx.arc(b.x, b.y, b.r, 0, Math.PI*2);
          const gradBall = ctx.createRadialGradient(b.x-3, b.y-3, 3, b.x, b.y, b.r+2);
          gradBall.addColorStop(0, '#ffaaaa');
          gradBall.addColorStop(1, '#c03030');
          ctx.fillStyle = gradBall;
          ctx.shadowColor = '#ff6060';
          ctx.shadowBlur = 20;
          ctx.fill();
        });
        ctx.shadowBlur = 0;
      }

      function gameLoop() {
        for (let i = balls.length - 1; i >= 0; i--) {
          if (!balls[i].update()) balls.splice(i, 1);
        }
        draw();
        requestAnimationFrame(gameLoop);
      }
      gameLoop();

      document.getElementById('dropBallBtn').addEventListener('click', () => {
        const betInput = document.getElementById('betInput');
        let bet = parseInt(betInput.value);
        if (isNaN(bet) || bet < 10) bet = 10;
        if (bet > balance) {
          alert('‚ùå –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –∑–≤—ë–∑–¥!');
          return;
        }
        
        balance -= bet;
        updateBalance();
        balls.push(new Ball(width/2 + (Math.random()*30-15), 45, bet));
      });

      document.querySelectorAll('.level-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentLevel = btn.dataset.level;
          generateField(currentLevel);
        });
      });

      document.getElementById('betInput').addEventListener('change', function() {
        let v = parseInt(this.value);
        if (v < 10) this.value = 10;
        if (v > 10000) this.value = 10000;
      });

      updateBalance();
    })();
  </script>
</body>
</html>
