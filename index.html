<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMEET Casino - Plinko</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: #000;
    font-family: Arial, sans-serif;
}

/* –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–∑–∏–Ω–æ */
h1 {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 100px;
    color: #FFD700;
    text-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700, 0 0 30px #FF4500;
    white-space: nowrap;
    overflow: hidden;
    clip-path: inset(0 100% 0 0);
    animation: revealText 2s forwards ease-out;
    z-index: 10;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ */
@keyframes revealText {
    from { clip-path: inset(0 100% 0 0); }
    to { clip-path: inset(0 0 0 0); }
}

canvas {
    display: block;
}
</style>
</head>
<body>

<h1>üé∞ SMEET üé∞</h1>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// ================== –§–æ–Ω ==================
const stars = [];
for (let i = 0; i < 200; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 1.5 + 0.5,
        alpha: Math.random(),
        alphaChange: Math.random() * 0.01 + 0.002
    });
}

const comets = [];
for (let i = 0; i < 5; i++) {
    comets.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height / 2,
        speedX: Math.random() * 2 + 1,
        speedY: Math.random() * 2 + 1,
        radius: Math.random() * 3 + 2,
        trail: []
    });
}

// ================== –ü–ª–∏–Ω–∫–æ ==================
const cols = 10;
const pinRadius = 5;
const pinSpacingX = 80;
const pinSpacingY = 80;
const ballRadius = 10;

const sections = [];
for (let i = 0; i < cols; i++) {
    sections.push({x: i * (canvas.width / cols), width: canvas.width / cols, prize: Math.floor(Math.random()*100)});
}

const pins = [];
for (let row = 0; row < 6; row++) {
    for (let col = 0; col < cols; col++) {
        const offset = row % 2 === 0 ? 0 : pinSpacingX/2;
        const x = col * pinSpacingX + offset + (canvas.width - cols*pinSpacingX)/2;
        const y = row * pinSpacingY + 100;
        pins.push({x, y});
    }
}

const balls = [];
function dropBall() {
    balls.push({
        x: canvas.width/2,
        y: 50,
        vx: (Math.random()*2 - 1)*2,
        vy: 0
    });
}

// ================== –ê–Ω–∏–º–∞—Ü–∏—è ==================
function animate() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // --- –ó–≤–µ–∑–¥—ã ---
    stars.forEach(s => {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.radius, 0, Math.PI*2);
        ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
        ctx.fill();
        ctx.closePath();
        s.alpha += s.alphaChange;
        if(s.alpha > 1 || s.alpha < 0) s.alphaChange *= -1;
    });

    // --- –ö–æ–º–µ—Ç—ã —Å —Ö–≤–æ—Å—Ç–æ–º ---
    comets.forEach(c => {
        c.trail.push({x: c.x, y: c.y});
        if(c.trail.length > 20) c.trail.shift();

        c.trail.forEach((point,i) => {
            const alpha = i / c.trail.length * 0.5;
            ctx.beginPath();
            ctx.arc(point.x, point.y, c.radius,0,Math.PI*2);
            ctx.fillStyle = `rgba(255,255,255,${alpha})`;
            ctx.fill();
            ctx.closePath();
        });

        ctx.beginPath();
        ctx.arc(c.x, c.y, c.radius,0,Math.PI*2);
        ctx.fillStyle = '#fff';
        ctx.fill();
        ctx.closePath();

        c.x += c.speedX;
        c.y += c.speedY;
        if(c.x > canvas.width + 50 || c.y > canvas.height + 50){
            c.x = Math.random()*canvas.width;
            c.y = -50;
            c.trail=[];
        }
    });

    // --- –°–µ–∫—Ü–∏–∏ –ü–ª–∏–Ω–∫–æ ---
    sections.forEach(s=>{
        ctx.fillStyle = 'rgba(255,255,255,0.1)';
        ctx.fillRect(s.x, canvas.height-50, s.width, 50);
        ctx.fillStyle = '#fff';
        ctx.font = '20px Arial';
        ctx.fillText(s.prize, s.x + s.width/2 - 10, canvas.height - 20);
    });

    // --- –®—Ç—ã—Ä–∏ –ü–ª–∏–Ω–∫–æ ---
    pins.forEach(pin=>{
        ctx.beginPath();
        ctx.arc(pin.x, pin.y, pinRadius,0,Math.PI*2);
        ctx.fillStyle='#FFD700';
        ctx.fill();
        ctx.closePath();
    });

    // --- –®–∞—Ä–∏–∫–∏ –ü–ª–∏–Ω–∫–æ ---
    balls.forEach(ball=>{
        ball.vy += 0.3;
        ball.x += ball.vx;
        ball.y += ball.vy;

        // –æ—Ç—Å–∫–∞–∫–∏–≤–∞–µ–º –æ—Ç —à—Ç—ã—Ä–µ–π
        pins.forEach(pin=>{
            const dx=pin.x-ball.x;
            const dy=pin.y-ball.y;
            const dist=Math.sqrt(dx*dx + dy*dy);
            if(dist < pinRadius+ballRadius){
                ball.vy *= -0.5;
                ball.vx += (Math.random()*2-1);
            }
        });

        // —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
        if(ball.x-ballRadius<0){ ball.x=ballRadius; ball.vx*=-1; }
        if(ball.x+ballRadius>canvas.width){ ball.x=canvas.width-ballRadius; ball.vx*=-1; }

        // –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Å–µ–∫—Ü–∏—é
        if(ball.y+ballRadius>canvas.height-50){
            const sec=Math.floor(ball.x/(canvas.width/cols));
            console.log('–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏:', sections[sec].prize);
            ball.y=canvas.height+100;
        }

        ctx.beginPath();
        ctx.arc(ball.x,ball.y,ballRadius,0,Math.PI*2);
        ctx.fillStyle='#ff5555';
        ctx.fill();
        ctx.closePath();
    });

    requestAnimationFrame(animate);
}

animate();

// --- –∫–ª–∏–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —à–∞—Ä–∏–∫–∞ ---
canvas.addEventListener('click', dropBall);

// --- resize ---
window.addEventListener('resize', ()=>{
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
});
</script>

</body>
</html>
