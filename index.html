<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>SMEET ‚ú¶ PREMIUM CASINO</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: #03050a;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 8px;
    }

    /* ‚ú¶‚ú¶‚ú¶ –ü–†–ò–í–ï–¢–°–¢–í–ò–ï ‚ú¶‚ú¶‚ú¶ */
    .welcome-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 30% 40%, #2a1f3a, #020514);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.8s ease;
    }

    .welcome-content {
      text-align: center;
      filter: drop-shadow(0 0 70px #ff44aa);
    }

    .welcome-title {
      font-size: clamp(90px, 22vw, 180px);
      font-weight: 900;
      background: linear-gradient(145deg, #fff0cf, #ffaa44, #ff44aa, #aa44ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 80px #ff44aa, 0 0 150px #aa44ff;
      letter-spacing: 15px;
      animation: neonGlitch 1.5s;
    }

    .welcome-subtitle {
      font-size: clamp(28px, 7vw, 48px);
      color: #fff;
      text-shadow: 0 0 30px #aa44ff, 0 0 60px #ff44aa;
      animation: fadeUp 1.2s 0.3s both;
    }

    @keyframes neonGlitch {
      0% { transform: scale(1.2) skewX(20deg); opacity: 0; filter: blur(30px); }
      30% { transform: scale(0.9) skewX(-10deg); opacity: 0.7; }
      60% { transform: scale(1.05) skewX(5deg); }
      100% { transform: scale(1) skewX(0); opacity: 1; filter: blur(0); }
    }

    @keyframes fadeUp {
      from { transform: translateY(70px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* ‚ú¶‚ú¶‚ú¶ –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† ‚ú¶‚ú¶‚ú¶ */
    .app {
      width: 100%;
      max-width: 1000px;
      background: rgba(8, 12, 22, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 60px;
      padding: 24px;
      box-shadow: 0 40px 70px #000000ee, 0 0 0 3px #ffd96677 inset, 0 0 70px #ff44aa77;
      border: 1px solid #ffd966cc;
      opacity: 0;
      transform: scale(0.95);
      transition: opacity 0.8s, transform 0.8s;
    }

    .app.visible {
      opacity: 1;
      transform: scale(1);
    }

    /* –®–∞–ø–∫–∞ */
    .header {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 100px;
      padding: 14px 24px;
      margin-bottom: 28px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border: 1px solid #ffd966;
      box-shadow: 0 10px 20px #000000cc;
    }

    .balance-block {
      display: flex;
      align-items: center;
      gap: 16px;
      background: #0e1628;
      padding: 8px 28px 8px 20px;
      border-radius: 60px;
      border: 2px solid #ffd966;
      box-shadow: 0 0 30px #ffd96666;
    }

    .stars-icon {
      font-size: 36px;
      filter: drop-shadow(0 0 12px gold) drop-shadow(0 0 25px orange);
      animation: starPulse 2s infinite;
    }

    @keyframes starPulse {
      0% { transform: scale(1); filter: drop-shadow(0 0 12px gold); }
      50% { transform: scale(1.1); filter: drop-shadow(0 0 25px gold) drop-shadow(0 0 40px orange); }
      100% { transform: scale(1); filter: drop-shadow(0 0 12px gold); }
    }

    .balance-value {
      font-size: 40px;
      font-weight: 800;
      background: linear-gradient(145deg, #ffd966, #ffaa44, #ff44aa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .add-stars-btn {
      background: #1f2b44;
      border: 3px solid #ffd966;
      color: #ffd966;
      font-size: 22px;
      font-weight: 700;
      padding: 12px 32px;
      border-radius: 60px;
      cursor: pointer;
      box-shadow: 0 7px 0 #0a1220, 0 0 30px #ffd96699;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: 0.1s;
    }

    .add-stars-btn:active {
      transform: translateY(6px);
      box-shadow: 0 1px 0 #0a1220, 0 0 40px #ffd966;
    }

    /* –ú–µ–Ω—é –∏–≥—Ä */
    .games-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      padding: 10px 0;
    }

    .game-card {
      background: rgba(20, 30, 50, 0.7);
      backdrop-filter: blur(10px);
      border: 3px solid #ffd966;
      border-radius: 40px;
      padding: 30px 20px;
      text-align: center;
      cursor: pointer;
      transition: 0.2s;
      box-shadow: 0 12px 0 #0f1a2a, 0 0 40px #ff44aa55;
      position: relative;
      overflow: hidden;
    }

    .game-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at center, rgba(255,255,255,0.3), transparent 70%);
      animation: cardShine 5s infinite;
      pointer-events: none;
    }

    @keyframes cardShine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
      20% { opacity: 0.6; }
      40% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
    }

    .game-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 17px 0 #0f1a2a, 0 0 60px #ffaa44;
    }

    .game-card:active {
      transform: translateY(7px);
      box-shadow: 0 5px 0 #0f1a2a, 0 0 50px #ff44aa;
    }

    .game-card.disabled {
      opacity: 0.4;
      filter: grayscale(1);
      pointer-events: none;
    }

    .game-emoji {
      font-size: 70px;
      margin-bottom: 15px;
      filter: drop-shadow(0 0 20px gold);
    }

    .game-name {
      font-size: 32px;
      font-weight: 800;
      background: linear-gradient(145deg, #ffd966, #ffaa44);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    .game-desc {
      color: #aabbdd;
      font-size: 18px;
    }

    /* –ö–û–ù–¢–ï–ô–ù–ï–†–´ –ò–ì–† */
    .game-container {
      display: none;
    }

    .game-container.active {
      display: block;
      animation: gameAppear 0.4s;
    }

    @keyframes gameAppear {
      from { opacity: 0; transform: scale(0.96); }
      to { opacity: 1; transform: scale(1); }
    }

    .back-to-menu {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background: #1a263a;
      border: 2px solid #ffd966;
      color: #ffd966;
      font-size: 22px;
      font-weight: 600;
      padding: 12px 30px;
      border-radius: 60px;
      cursor: pointer;
      margin-bottom: 24px;
      box-shadow: 0 6px 0 #0f1a2a;
      transition: 0.1s;
    }

    .back-to-menu:active {
      transform: translateY(5px);
      box-shadow: 0 1px 0 #0f1a2a;
    }

    /* –ü–õ–ò–ù–ö–û */
    .canvas-wrapper {
      width: 100%;
      aspect-ratio: 860/600;
      border-radius: 40px;
      overflow: hidden;
      background: #020812;
      box-shadow: 0 20px 40px #000, 0 0 0 3px #ffd96699 inset, 0 0 60px #ff44aa66;
      margin-bottom: 20px;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    .plinko-controls {
      background: #101a2aee;
      backdrop-filter: blur(10px);
      padding: 16px 24px;
      border-radius: 80px;
      border: 2px solid #ffd966;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 15px;
      box-shadow: 0 10px 20px #000000cc;
    }

    .bet-section {
      display: flex;
      align-items: center;
      gap: 18px;
      background: #0b1222;
      padding: 8px 24px;
      border-radius: 60px;
      border: 2px solid #ffd966aa;
    }

    .bet-label {
      color: #ffd966;
      font-size: 22px;
      font-weight: 600;
      text-shadow: 0 0 10px #ffaa44;
    }

    .bet-input {
      background: #1a2a44;
      border: 2px solid #ffd966;
      color: #ffd966;
      font-size: 28px;
      font-weight: 700;
      width: 120px;
      padding: 10px 16px;
      border-radius: 60px;
      text-align: center;
    }

    .action-btn {
      background: linear-gradient(145deg, #ffcc00, #ff9900, #ff44aa);
      border: none;
      font-size: 32px;
      font-weight: 800;
      padding: 14px 60px;
      border-radius: 80px;
      color: #121212;
      box-shadow: 0 8px 0 #aa4400, 0 0 40px #ffaa44;
      cursor: pointer;
      transition: 0.08s;
    }

    .action-btn:active {
      transform: translateY(7px);
      box-shadow: 0 1px 0 #aa4400, 0 0 50px #ff44aa;
    }

    .level-panel {
      display: flex;
      gap: 12px;
      margin-top: 18px;
    }

    .level-btn {
      background: #1b2740;
      border: 2px solid #ffd966aa;
      color: white;
      font-size: 18px;
      font-weight: 700;
      padding: 12px 24px;
      border-radius: 60px;
      cursor: pointer;
      flex: 1;
      text-align: center;
      box-shadow: 0 5px 0 #0f1a2a;
    }

    .level-btn.active {
      background: linear-gradient(145deg, #ffd966, #ffaa44);
      color: #121212;
      border-color: #fff0b0;
      box-shadow: 0 5px 0 #b15d00, 0 0 30px #ffd966;
    }

    .level-btn.disabled {
      opacity: 0.4;
      pointer-events: none;
    }

    /* DICE */
    .dice-container {
      background: #0f1828ee;
      backdrop-filter: blur(10px);
      border-radius: 60px;
      padding: 40px;
      border: 2px solid #ffd966;
      box-shadow: 0 0 50px #ff44aa55;
      text-align: center;
    }

    .dice-display {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin: 40px 0;
    }

    .dice {
      width: 120px;
      height: 120px;
      background: linear-gradient(145deg, #fff0d0, #ffd966);
      border-radius: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 70px;
      font-weight: 800;
      color: #1a1a2a;
      box-shadow: 0 15px 0 #aa5500, 0 0 50px #ffaa44;
      animation: diceRoll 0.3s;
    }

    @keyframes diceRoll {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(90deg); }
      50% { transform: rotate(180deg); }
      75% { transform: rotate(270deg); }
      100% { transform: rotate(360deg); }
    }

    .dice-label {
      color: #ffd966;
      font-size: 24px;
      margin-top: 15px;
    }

    .dice-result {
      font-size: 48px;
      font-weight: 800;
      background: linear-gradient(145deg, #ffd966, #ff44aa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 30px 0;
    }

    /* SLOTS */
    .slots-container {
      background: #0f1828ee;
      backdrop-filter: blur(10px);
      border-radius: 60px;
      padding: 40px;
      border: 2px solid #ffd966;
      box-shadow: 0 0 50px #ff44aa55;
    }

    .reels {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 40px 0;
    }

    .reel {
      width: 140px;
      height: 140px;
      background: #1a2a44;
      border: 4px solid #ffd966;
      border-radius: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
      box-shadow: 0 10px 0 #aa5500, 0 0 40px #ffaa44;
      animation: spinReel 0.2s infinite;
    }

    .reel.stopped {
      animation: none;
    }

    @keyframes spinReel {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* ROULETTE */
    .roulette-container {
      background: #0f1828ee;
      backdrop-filter: blur(10px);
      border-radius: 60px;
      padding: 40px;
      border: 2px solid #ffd966;
      box-shadow: 0 0 50px #ff44aa55;
    }

    .roulette-wheel {
      width: 300px;
      height: 300px;
      margin: 0 auto 40px;
      background: conic-gradient(#ff4444 0deg 45deg, #222 45deg 90deg, #44ff44 90deg 135deg, #222 135deg 180deg, #4444ff 180deg 225deg, #222 225deg 270deg, #ffff44 270deg 315deg, #222 315deg 360deg);
      border-radius: 50%;
      border: 8px solid #ffd966;
      box-shadow: 0 0 60px #ffaa44;
      animation: spinWheel 0.5s;
    }

    @keyframes spinWheel {
      from { transform: rotate(0deg); }
      to { transform: rotate(720deg); }
    }

    .roulette-number {
      font-size: 60px;
      font-weight: 800;
      color: #ffd966;
      text-shadow: 0 0 30px #ff44aa;
      text-align: center;
    }

    /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
    .game-info {
      font-size: 28px;
      color: #ffd966;
      margin: 30px 0;
      text-shadow: 0 0 15px #ff44aa;
    }

    .star {
      position: fixed;
      border-radius: 50%;
      background: white;
      box-shadow: 0 0 30px gold, 0 0 60px magenta;
      pointer-events: none;
      z-index: 9999;
      animation: starFall 3s linear forwards;
    }

    @keyframes starFall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="welcome-screen" id="welcomeScreen">
    <div class="welcome-content">
      <div class="welcome-title">SMEET</div>
      <div class="welcome-subtitle">PREMIUM CASINO</div>
    </div>
  </div>

  <div class="app" id="app">
    <div class="header">
      <div class="balance-block">
        <span class="stars-icon">‚ú¶</span>
        <span class="balance-value" id="balanceDisplay">5000</span>
      </div>
      <button class="add-stars-btn" id="addStarsBtn">‚ú® +1000</button>
    </div>

    <!-- –ú–ï–ù–Æ -->
    <div id="gamesMenu" class="games-grid">
      <div class="game-card active" data-game="plinko">
        <div class="game-emoji">üé≤</div>
        <div class="game-name">PLINKO</div>
        <div class="game-desc">–ö–ª–∞—Å—Å–∏–∫–∞ | x50</div>
      </div>
      <div class="game-card" data-game="dice">
        <div class="game-emoji">üé≤</div>
        <div class="game-name">DICE</div>
        <div class="game-desc">–ë—Ä–æ—Å—å –∫—É–±–∏–∫–∏</div>
      </div>
      <div class="game-card" data-game="slots">
        <div class="game-emoji">üé∞</div>
        <div class="game-name">SLOTS</div>
        <div class="game-desc">–ö—Ä—É—Ç–∏ –±–∞—Ä–∞–±–∞–Ω—ã</div>
      </div>
      <div class="game-card" data-game="roulette">
        <div class="game-emoji">üé°</div>
        <div class="game-name">ROULETTE</div>
        <div class="game-desc">–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</div>
      </div>
    </div>

    <!-- PLINKO -->
    <div id="plinkoContainer" class="game-container">
      <div class="back-to-menu" onclick="window.showMenu()">‚Üê –í –ú–ï–ù–Æ</div>
      <div class="canvas-wrapper">
        <canvas id="plinkoCanvas" width="860" height="600"></canvas>
      </div>
      <div class="plinko-controls">
        <div class="bet-section">
          <span class="bet-label">‚ú¶</span>
          <input type="number" id="betInput" class="bet-input" value="50" min="10" step="10">
        </div>
        <button class="action-btn" id="dropBallBtn">–ö–ò–ù–£–¢–¨</button>
      </div>
      <div class="level-panel">
        <button class="level-btn active" data-level="easy">üå± –õ–Å–ì–ö–ò–ô</button>
        <button class="level-btn" data-level="medium">‚ö° –°–†–ï–î–ù–ò–ô</button>
        <button class="level-btn" data-level="hard">üî• –•–ê–†–î</button>
      </div>
    </div>

    <!-- DICE -->
    <div id="diceContainer" class="game-container">
      <div class="back-to-menu" onclick="window.showMenu()">‚Üê –í –ú–ï–ù–Æ</div>
      <div class="dice-container">
        <h2 style="color:#ffd966; font-size:36px;">üé≤ DICE</h2>
        <div class="dice-display">
          <div>
            <div class="dice" id="dice1">6</div>
            <div class="dice-label">–ö–£–ë–ò–ö 1</div>
          </div>
          <div>
            <div class="dice" id="dice2">6</div>
            <div class="dice-label">–ö–£–ë–ò–ö 2</div>
          </div>
        </div>
        <div class="dice-result" id="diceResult">–°–£–ú–ú–ê: 12</div>
        <div class="bet-section" style="justify-content:center; margin-bottom:30px;">
          <span class="bet-label">–°–¢–ê–í–ö–ê ‚ú¶</span>
          <input type="number" id="diceBet" class="bet-input" value="50" min="10">
        </div>
        <button class="action-btn" id="rollDiceBtn">–ë–†–û–°–ò–¢–¨</button>
      </div>
    </div>

    <!-- SLOTS -->
    <div id="slotsContainer" class="game-container">
      <div class="back-to-menu" onclick="window.showMenu()">‚Üê –í –ú–ï–ù–Æ</div>
      <div class="slots-container">
        <h2 style="color:#ffd966; font-size:36px;">üé∞ SLOTS</h2>
        <div class="reels">
          <div class="reel" id="reel1">üçí</div>
          <div class="reel" id="reel2">üçí</div>
          <div class="reel" id="reel3">üçí</div>
        </div>
        <div class="game-info" id="slotsResult"></div>
        <div class="bet-section" style="justify-content:center; margin-bottom:30px;">
          <span class="bet-label">–°–¢–ê–í–ö–ê ‚ú¶</span>
          <input type="number" id="slotsBet" class="bet-input" value="50" min="10">
        </div>
        <button class="action-btn" id="spinSlotsBtn">–ö–†–£–¢–ò–¢–¨</button>
      </div>
    </div>

    <!-- ROULETTE -->
    <div id="rouletteContainer" class="game-container">
      <div class="back-to-menu" onclick="window.showMenu()">‚Üê –í –ú–ï–ù–Æ</div>
      <div class="roulette-container">
        <h2 style="color:#ffd966; font-size:36px;">üé° ROULETTE</h2>
        <div class="roulette-wheel" id="rouletteWheel"></div>
        <div class="roulette-number" id="rouletteNumber">0</div>
        <div class="bet-section" style="justify-content:center; margin:30px 0;">
          <span class="bet-label">–°–¢–ê–í–ö–ê ‚ú¶</span>
          <input type="number" id="rouletteBet" class="bet-input" value="50" min="10">
        </div>
        <div style="display:flex; gap:15px; justify-content:center;">
          <button class="level-btn" onclick="betRoulette('red')">üî¥ –ö–†–ê–°–ù–û–ï (x2)</button>
          <button class="level-btn" onclick="betRoulette('black')">‚ö´ –ß–Å–†–ù–û–ï (x2)</button>
          <button class="level-btn" onclick="betRoulette('number')">üéØ –ß–ò–°–õ–û (x36)</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function() {
      // –ó–≤—ë–∑–¥—ã
      function createStar() {
        const s = document.createElement('div');
        s.className = 'star';
        s.style.left = Math.random() * 100 + '%';
        s.style.top = '-10px';
        s.style.width = s.style.height = (Math.random() * 8 + 3) + 'px';
        s.style.animationDuration = (Math.random() * 5 + 2) + 's';
        s.style.background = `hsl(${Math.random() * 360}, 100%, 70%)`;
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 7000);
      }
      for (let i = 0; i < 100; i++) setTimeout(createStar, i * 20);
      setInterval(createStar, 200);

      // –≠–ª–µ–º–µ–Ω—Ç—ã
      const welcome = document.getElementById('welcomeScreen');
      const app = document.getElementById('app');
      
      setTimeout(() => {
        welcome.style.opacity = '0';
        setTimeout(() => {
          welcome.style.display = 'none';
          app.classList.add('visible');
        }, 800);
      }, 2500);

      // –ë–∞–ª–∞–Ω—Å
      let balance = 5000;
      const balanceDisplay = document.getElementById('balanceDisplay');
      function updateBalance() { balanceDisplay.innerText = balance; }
      document.getElementById('addStarsBtn').onclick = () => { balance += 1000; updateBalance(); };

      // –ù–∞–≤–∏–≥–∞—Ü–∏—è
      window.showMenu = function() {
        document.querySelectorAll('.game-container').forEach(c => c.classList.remove('active'));
        document.getElementById('gamesMenu').style.display = 'grid';
      };

      document.querySelectorAll('.game-card').forEach(card => {
        card.addEventListener('click', () => {
          const game = card.dataset.game;
          document.getElementById('gamesMenu').style.display = 'none';
          document.querySelectorAll('.game-container').forEach(c => c.classList.remove('active'));
          document.getElementById(game + 'Container').classList.add('active');
        });
      });

      // PLINKO
      const canvas = document.getElementById('plinkoCanvas');
      const ctx = canvas.getContext('2d');
      const width = 860, height = 600;

      let currentLevel = 'easy';
      let balls = [], pins = [], multipliers = [], ballsInPlay = 0, topPins = [];

      const levelMultipliers = {
        easy: [5.0, 3.0, 1.8, 1.2, 0.7, 0.3, 0.7, 1.2, 1.8, 3.0, 5.0],
        medium: [10.0, 5.0, 2.5, 1.5, 1.0, 0.5, 0.2, 0.5, 1.0, 1.5, 2.5, 5.0, 10.0],
        hard: [50.0, 20.0, 10.0, 5.0, 2.5, 1.2, 0.5, 0.1, 0.5, 1.2, 2.5, 5.0, 10.0, 20.0, 50.0]
      };

      function setLevelButtons(disabled) {
        document.querySelectorAll('.level-btn').forEach(b => {
          disabled ? b.classList.add('disabled') : b.classList.remove('disabled');
        });
      }

      function generateField(level) {
        pins = []; topPins = [];
        const mults = levelMultipliers[level];
        const rows = 13, startY = 70, pinR = 5.5, spX = 44, spY = 32;
        const maxCols = mults.length + 4;
        const totalW = (maxCols - 1) * spX;
        const offX = (width - totalW) / 2;

        for (let r = 0; r < rows; r++) {
          let cols = r < 5 ? 6 + r : r < 8 ? 11 : 19 - r;
          cols = Math.min(cols, mults.length + 5);
          const rowOff = (maxCols - cols) * spX / 2;
          for (let c = 0; c < cols; c++) {
            let x = offX + rowOff + c * spX + (r % 2 ? spX/2 : 0);
            let y = startY + r * spY;
            pins.push({ x, y, r: pinR });
            if (r === 0) topPins.push(x);
          }
        }

        multipliers = [];
        const cellW = width / mults.length;
        for (let i = 0; i < mults.length; i++) {
          let col = mults[i] <= 0.5 ? '#6c7a96' : mults[i] <= 1.0 ? '#4f9fff' : mults[i] <= 2.0 ? '#42d692' : mults[i] <= 5.0 ? '#ffb347' : '#ff6b6b';
          multipliers.push({ x: i * cellW, w: cellW, val: mults[i], col });
        }
      }
      generateField('easy');

      class Ball {
        constructor(x, y, bet) {
          this.x = x; this.y = y; this.vx = (Math.random() - 0.5) * 1.7; this.vy = 0.5; this.r = 8; this.bet = bet; this.trail = []; this.hue = Math.random() * 360;
        }
        update() {
          this.hue = (this.hue + 2) % 360;
          this.vy += 0.19; this.vx *= 0.99;
          this.x += this.vx; this.y += this.vy;
          this.trail.push({ x: this.x, y: this.y, hue: this.hue });
          if (this.trail.length > 8) this.trail.shift();

          for (let p of pins) {
            let dx = this.x - p.x, dy = this.y - p.y, dist = Math.hypot(dx, dy), min = this.r + p.r;
            if (dist < min) {
              let a = Math.atan2(dy, dx), over = min - dist;
              this.x += Math.cos(a) * over * 0.7; this.y += Math.sin(a) * over * 0.7;
              let sp = Math.hypot(this.vx, this.vy);
              if (sp > 0.1) {
                let nx = dx / dist, ny = dy / dist, dot = this.vx * nx + this.vy * ny;
                this.vx = (this.vx - 1.4 * dot * nx) * 0.7;
                this.vy = (this.vy - 1.4 * dot * ny) * 0.7;
                this.vx += (Math.random() - 0.5) * 0.4;
                this.vy += (Math.random() - 0.5) * 0.2;
              }
            }
          }
          if (this.x - this.r < 8) { this.x = 8 + this.r; this.vx *= -0.6; }
          if (this.x + this.r > width - 8) { this.x = width - 8 - this.r; this.vx *= -0.6; }

          if (this.y + this.r > height - 50) {
            let idx = Math.floor(this.x / (width / multipliers.length));
            if (idx >= 0 && idx < multipliers.length) {
              balance += Math.floor(this.bet * multipliers[idx].val);
              updateBalance();
              flashIdx = idx; flashAlpha = 1;
            }
            ballsInPlay--;
            if (ballsInPlay === 0) setLevelButtons(false);
            return false;
          }
          return true;
        }
      }

      let flashIdx = -1, flashAlpha = 0;

      function draw() {
        ctx.clearRect(0, 0, width, height);
        let grad = ctx.createLinearGradient(0, 0, 0, height);
        grad.addColorStop(0, '#020514'); grad.addColorStop(0.5, '#1a2a4a'); grad.addColorStop(1, '#020514');
        ctx.fillStyle = grad; ctx.fillRect(0, 0, width, height);

        pins.forEach(p => {
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          let g = ctx.createRadialGradient(p.x-2, p.y-2, 2, p.x, p.y, p.r+3);
          g.addColorStop(0, '#fffacd'); g.addColorStop(0.5, '#ffd966'); g.addColorStop(1, '#b8860b');
          ctx.fillStyle = g; ctx.shadowColor = '#ffd966'; ctx.shadowBlur = 12; ctx.fill();
          ctx.shadowBlur = 0;
          ctx.beginPath(); ctx.arc(p.x-1.5, p.y-1.5, 1.8, 0, Math.PI*2);
          ctx.fillStyle = '#fff9e6'; ctx.fill();
        });

        multipliers.forEach((m, i) => {
          let gr = ctx.createLinearGradient(m.x, height-50, m.x + m.w, height-10);
          gr.addColorStop(0, m.col + 'aa'); gr.addColorStop(1, m.col + 'ff');
          ctx.fillStyle = gr; ctx.fillRect(m.x, height-50, m.w-1, 40);
          if (flashIdx === i && flashAlpha > 0) {
            ctx.fillStyle = `rgba(255,255,255,${flashAlpha})`; ctx.fillRect(m.x, height-50, m.w-1, 40);
            flashAlpha *= 0.5; if (flashAlpha < 0.05) flashIdx = -1;
          }
          ctx.strokeStyle = '#fff9e6'; ctx.lineWidth = 1.5; ctx.strokeRect(m.x, height-50, m.w-1, 40);
          ctx.font = 'bold 18px Inter'; ctx.fillStyle = '#fff'; ctx.shadowColor = '#000'; ctx.shadowBlur = 6;
          ctx.fillText('x' + (m.val < 10 ? m.val.toFixed(1) : Math.round(m.val)), m.x + m.w/2, height-27);
        });
        ctx.shadowBlur = 0;

        balls.forEach(b => {
          b.trail.forEach((t, j) => {
            let a = (j / b.trail.length) * 0.4;
            ctx.beginPath(); ctx.arc(t.x, t.y, b.r*0.6, 0, Math.PI*2);
            ctx.fillStyle = `hsla(${t.hue}, 90%, 70%, ${a})`; ctx.fill();
          });
          ctx.shadowColor = `hsl(${b.hue}, 100%, 70%)`; ctx.shadowBlur = 22;
          ctx.beginPath(); ctx.arc(b.x, b.y, b.r, 0, Math.PI*2);
          let gr = ctx.createRadialGradient(b.x-3, b.y-3, 2, b.x, b.y, b.r+2);
          gr.addColorStop(0, `hsl(${b.hue}, 100%, 85%)`); gr.addColorStop(1, `hsl(${b.hue}, 100%, 35%)`);
          ctx.fillStyle = gr; ctx.fill();
          ctx.shadowBlur = 0;
          ctx.beginPath(); ctx.arc(b.x-2, b.y-2, 2, 0, Math.PI*2);
          ctx.fillStyle = '#ffffffaa'; ctx.fill();
        });
      }

      function loop() {
        for (let i = balls.length-1; i>=0; i--) if (!balls[i].update()) balls.splice(i,1);
        draw();
        requestAnimationFrame(loop);
      }
      loop();

      document.getElementById('dropBallBtn').onclick = () => {
        let bet = parseInt(document.getElementById('betInput').value) || 50;
        if (bet < 10) bet = 10;
        if (bet > balance) { alert('‚ú¶ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç'); return; }
        balance -= bet; updateBalance();
        if (topPins.length) {
          let x = topPins[Math.floor(Math.random() * topPins.length)] + (Math.random()*8-4);
          balls.push(new Ball(x, 40, bet));
          ballsInPlay++; setLevelButtons(true);
        }
      };

      document.querySelectorAll('.level-btn').forEach(b => {
        b.onclick = () => {
          if (b.classList.contains('disabled')) return;
          document.querySelectorAll('.level-btn').forEach(bb => bb.classList.remove('active'));
          b.classList.add('active');
          currentLevel = b.dataset.level;
          generateField(currentLevel);
        };
      });

      // DICE
      document.getElementById('rollDiceBtn').onclick = () => {
        let bet = parseInt(document.getElementById('diceBet').value) || 50;
        if (bet > balance) { alert('‚ú¶ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç'); return; }
        
        let dice1 = Math.floor(Math.random() * 6) + 1;
        let dice2 = Math.floor(Math.random() * 6) + 1;
        let sum = dice1 + dice2;
        
        document.getElementById('dice1').innerText = dice1;
        document.getElementById('dice2').innerText = dice2;
        document.getElementById('diceResult').innerHTML = `–°–£–ú–ú–ê: ${sum}`;
        
        if (sum === 7 || sum === 11) {
          balance += bet * 2;
          document.getElementById('diceResult').innerHTML += ` üéâ –í–´–ò–ì–†–´–® x2`;
        } else {
          balance -= bet;
        }
        updateBalance();
      };

      // SLOTS
      const symbols = ['üçí', 'üçã', 'üçä', 'üçá', 'üíé', '7Ô∏è‚É£'];
      document.getElementById('spinSlotsBtn').onclick = () => {
        let bet = parseInt(document.getElementById('slotsBet').value) || 50;
        if (bet > balance) { alert('‚ú¶ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç'); return; }
        
        let reels = [];
        for (let i = 0; i < 3; i++) {
          reels.push(symbols[Math.floor(Math.random() * symbols.length)]);
        }
        
        document.getElementById('reel1').innerText = reels[0];
        document.getElementById('reel2').innerText = reels[1];
        document.getElementById('reel3').innerText = reels[2];
        
        let result = '';
        if (reels[0] === reels[1] && reels[1] === reels[2]) {
          balance += bet * 10;
          result = 'üéâ –î–ñ–ï–ö–ü–û–¢ x10';
        } else if (reels[0] === reels[1] || reels[1] === reels[2] || reels[0] === reels[2]) {
          balance += bet * 2;
          result = 'üéà –ü–ê–†–ê x2';
        } else {
          balance -= bet;
          result = 'üò¢ –ü–†–û–ò–ì–†–´–®';
        }
        document.getElementById('slotsResult').innerText = result;
        updateBalance();
      };

      // ROULETTE
      window.betRoulette = (type) => {
        let bet = parseInt(document.getElementById('rouletteBet').value) || 50;
        if (bet > balance) { alert('‚ú¶ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç'); return; }
        
        let number = Math.floor(Math.random() * 37);
        let color = number === 0 ? 'green' : (number % 2 === 0 ? 'black' : 'red');
        
        document.getElementById('rouletteNumber').innerText = number;
        document.getElementById('rouletteWheel').style.animation = 'spinWheel 0.5s';
        setTimeout(() => document.getElementById('rouletteWheel').style.animation = '', 500);
        
        if (type === 'number') {
          let guess = prompt('–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 36 (x36)');
          if (parseInt(guess) === number) {
            balance += bet * 36;
            alert('üéâ –î–ñ–ï–ö–ü–û–¢ x36');
          } else {
            balance -= bet;
          }
        } else if (type === 'red' && color === 'red') {
          balance += bet * 2;
        } else if (type === 'black' && color === 'black') {
          balance += bet * 2;
        } else {
          balance -= bet;
        }
        updateBalance();
      };

      updateBalance();
    })();
  </script>
</body>
</html>
